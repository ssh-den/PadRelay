

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>padrelay.scripts.key_mapper &mdash; PadRelay 1.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=fc837d61"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            PadRelay
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#system-requirements">System Requirements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../installation.html#client-requirements">Client Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../installation.html#server-requirements">Server Requirements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#installation-methods">Installation Methods</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../installation.html#method-1-install-from-pypi-recommended">Method 1: Install from PyPI (Recommended)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../installation.html#method-2-install-from-source">Method 2: Install from Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../installation.html#method-3-install-dependencies-manually">Method 3: Install Dependencies Manually</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#installing-vigembus-windows-server-only">Installing ViGEmBus (Windows Server Only)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#optional-dependencies">Optional Dependencies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../installation.html#tls-ssl-support">TLS/SSL Support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#verifying-installation">Verifying Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../installation.html#client-verification">Client Verification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../installation.html#server-verification-windows">Server Verification (Windows)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../installation.html#key-mapper-verification">Key Mapper Verification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../installation.html#testing-gamepad-detection">Testing Gamepad Detection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#upgrading">Upgrading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#uninstallation">Uninstallation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#troubleshooting-installation">Troubleshooting Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../installation.html#permission-errors">Permission Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../installation.html#vgamepad-installation-fails">vgamepad Installation Fails</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../installation.html#pygame-installation-issues">pygame Installation Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../installation.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../quickstart.html">Quick Start Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart.html#basic-setup">Basic Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../quickstart.html#step-1-create-configuration-files">Step 1: Create Configuration Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../quickstart.html#step-2-start-the-server">Step 2: Start the Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../quickstart.html#step-3-start-the-client">Step 3: Start the Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../quickstart.html#step-4-test-the-connection">Step 4: Test the Connection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart.html#using-command-line-arguments">Using Command-Line Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart.html#using-udp-for-lower-latency">Using UDP for Lower Latency</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart.html#environment-variables">Environment Variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../quickstart.html#pre-hashed-passwords">Pre-Hashed Passwords</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart.html#mapping-custom-controllers">Mapping Custom Controllers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart.html#running-from-source">Running from Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart.html#common-issues">Common Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../quickstart.html#failed-to-initialize-gamepad">“Failed to initialize gamepad”</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../quickstart.html#connection-refused">“Connection refused”</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../quickstart.html#authentication-failed">“Authentication failed”</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../quickstart.html#tls-handshake-failed">“TLS handshake failed”</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../quickstart.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../configuration.html">Configuration Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../configuration.html#configuration-files">Configuration Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration.html#configuration-priority">Configuration Priority</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../configuration.html#client-configuration">Client Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration.html#network-settings">Network Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration.html#joystick-settings">Joystick Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration.html#client-settings">Client Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration.html#client-command-line-flags">Client Command-Line Flags</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../configuration.html#server-configuration">Server Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration.html#server-settings">Server Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration.html#virtual-gamepad-settings">Virtual Gamepad Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration.html#button-mapping">Button Mapping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration.html#axis-mapping">Axis Mapping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration.html#axis-options">Axis Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration.html#server-command-line-flags">Server Command-Line Flags</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../configuration.html#environment-variables">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../configuration.html#tls-ssl-configuration">TLS/SSL Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration.html#certificate-management">Certificate Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration.html#custom-certificates">Custom Certificates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration.html#disabling-tls">Disabling TLS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../configuration.html#password-security">Password Security</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration.html#password-hashing">Password Hashing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration.html#pre-hashing-passwords">Pre-Hashing Passwords</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration.html#password-strength">Password Strength</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../configuration.html#example-configuration-files">Example Configuration Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration.html#minimal-tcp-setup">Minimal TCP Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration.html#udp-low-latency-setup">UDP Low-Latency Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../configuration.html#custom-controller-mapping">Custom Controller Mapping</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../configuration.html#see-also">See Also</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../user_guide/client.html">Client Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/client.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/client.html#basic-usage">Basic Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#starting-the-client">Starting the Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#stopping-the-client">Stopping the Client</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/client.html#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#configuration-file">Configuration File</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#command-line-options">Command-Line Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#environment-variables">Environment Variables</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/client.html#gamepad-detection">Gamepad Detection</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#listing-available-gamepads">Listing Available Gamepads</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#selecting-a-gamepad">Selecting a Gamepad</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#multiple-gamepads">Multiple Gamepads</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/client.html#update-rate">Update Rate</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#choosing-an-update-rate">Choosing an Update Rate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#bandwidth-usage">Bandwidth Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/client.html#protocol-selection">Protocol Selection</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#tcp-vs-udp">TCP vs UDP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#when-to-use-tcp">When to Use TCP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#when-to-use-udp">When to Use UDP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#switching-protocols">Switching Protocols</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/client.html#tls-configuration">TLS Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#enable-tls">Enable TLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#disable-tls">Disable TLS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/client.html#automatic-reconnection">Automatic Reconnection</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#reconnection-scenarios">Reconnection Scenarios</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#manual-reconnection">Manual Reconnection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/client.html#logging">Logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#log-location">Log Location</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#log-levels">Log Levels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#enable-debug-logging">Enable Debug Logging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/client.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#gamepad-not-detected">Gamepad Not Detected</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#connection-refused">Connection Refused</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#authentication-failed">Authentication Failed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#tls-handshake-failed">TLS Handshake Failed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#high-latency">High Latency</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#input-not-working">Input Not Working</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/client.html#advanced-usage">Advanced Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#running-from-python">Running from Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#custom-input-processing">Custom Input Processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/client.html#running-as-a-service">Running as a Service</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/client.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_guide/server.html">Server Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/server.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/server.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/server.html#basic-usage">Basic Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#starting-the-server">Starting the Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#stopping-the-server">Stopping the Server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/server.html#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#basic-configuration">Basic Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/server.html#virtual-gamepad-types">Virtual Gamepad Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#xbox-360-controller">Xbox 360 Controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#dualshock-4-controller">DualShock 4 Controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#verifying-virtual-gamepad">Verifying Virtual Gamepad</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/server.html#network-configuration">Network Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#binding-address">Binding Address</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#port-selection">Port Selection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/server.html#firewall-configuration">Firewall Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#windows-firewall">Windows Firewall</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#third-party-firewalls">Third-Party Firewalls</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/server.html#rate-limiting">Rate Limiting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#udp-rate-limits">UDP Rate Limits</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#adjusting-rate-limits">Adjusting Rate Limits</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/server.html#button-and-axis-mapping">Button and Axis Mapping</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#custom-button-mappings">Custom Button Mappings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#custom-axis-mappings">Custom Axis Mappings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#axis-options">Axis Options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/server.html#password-management">Password Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#automatic-hashing">Automatic Hashing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#pre-hashing-passwords">Pre-Hashing Passwords</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#environment-variables">Environment Variables</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/server.html#tls-ssl-configuration">TLS/SSL Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#using-auto-generated-certificates">Using Auto-Generated Certificates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#using-custom-certificates">Using Custom Certificates</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/server.html#multiple-clients">Multiple Clients</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/server.html#logging">Logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#debug-logging">Debug Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#log-rotation">Log Rotation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/server.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#virtual-gamepad-not-appearing">Virtual Gamepad Not Appearing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#port-already-in-use">Port Already in Use</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#authentication-failures">Authentication Failures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/server.html#performance-issues">Performance Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/server.html#running-as-windows-service">Running as Windows Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/server.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_guide/key_mapper.html">Key Mapper Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/key_mapper.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/key_mapper.html#when-to-use">When to Use</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/key_mapper.html#running-the-key-mapper">Running the Key Mapper</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/key_mapper.html#basic-usage">Basic Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/key_mapper.html#interactive-session">Interactive Session</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/key_mapper.html#options">Options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/key_mapper.html#mapping-process">Mapping Process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/key_mapper.html#button-mapping">Button Mapping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/key_mapper.html#axis-mapping">Axis Mapping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/key_mapper.html#skipping-mappings">Skipping Mappings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/key_mapper.html#using-generated-configuration">Using Generated Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/key_mapper.html#server-configuration">Server Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/key_mapper.html#client-configuration">Client Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/key_mapper.html#configuration-file-format">Configuration File Format</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/key_mapper.html#example-output">Example Output</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/key_mapper.html#manual-editing">Manual Editing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/key_mapper.html#swapping-buttons">Swapping Buttons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/key_mapper.html#inverting-axes">Inverting Axes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/key_mapper.html#adjusting-dead-zones">Adjusting Dead Zones</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/key_mapper.html#common-controller-mappings">Common Controller Mappings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/key_mapper.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/key_mapper.html#controller-not-detected">Controller Not Detected</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/key_mapper.html#incorrect-button-detection">Incorrect Button Detection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/key_mapper.html#d-pad-not-working">D-Pad Not Working</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/key_mapper.html#axis-values-inverted">Axis Values Inverted</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/key_mapper.html#sharing-configurations">Sharing Configurations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/key_mapper.html#advanced-usage">Advanced Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/key_mapper.html#mapping-multiple-controllers">Mapping Multiple Controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/key_mapper.html#macro-support">Macro Support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/key_mapper.html#examples">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/key_mapper.html#example-1-ps4-controller">Example 1: PS4 Controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/key_mapper.html#example-2-custom-flight-stick">Example 2: Custom Flight Stick</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/key_mapper.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_guide/tls_setup.html">TLS/SSL Setup Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/tls_setup.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/tls_setup.html#quick-start">Quick Start</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#using-auto-generated-certificates">Using Auto-Generated Certificates</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/tls_setup.html#certificate-locations">Certificate Locations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#auto-generated-certificates">Auto-Generated Certificates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#certificate-properties">Certificate Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#viewing-certificate-details">Viewing Certificate Details</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/tls_setup.html#using-custom-certificates">Using Custom Certificates</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#generating-with-openssl">Generating with OpenSSL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#using-let-s-encrypt">Using Let’s Encrypt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#configuring-custom-certificates">Configuring Custom Certificates</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/tls_setup.html#tls-configuration">TLS Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#tls-version">TLS Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#cipher-suites">Cipher Suites</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/tls_setup.html#disabling-tls">Disabling TLS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#when-to-disable">When to Disable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#how-to-disable">How to Disable</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/tls_setup.html#certificate-management">Certificate Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#certificate-expiration">Certificate Expiration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#renewing-certificates">Renewing Certificates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#certificate-rotation">Certificate Rotation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/tls_setup.html#troubleshooting-tls">Troubleshooting TLS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#tls-handshake-failed">TLS Handshake Failed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#certificate-validation-failed">Certificate Validation Failed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#permission-denied">Permission Denied</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#certificate-not-found">Certificate Not Found</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#debug-tls-issues">Debug TLS Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/tls_setup.html#security-considerations">Security Considerations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#self-signed-certificates">Self-Signed Certificates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#ca-signed-certificates">CA-Signed Certificates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#network-security">Network Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#vpn-vs-tls">VPN vs TLS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/tls_setup.html#testing-tls-connection">Testing TLS Connection</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#verify-tls-is-working">Verify TLS is Working</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/tls_setup.html#using-openssl-client">Using OpenSSL Client</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/tls_setup.html#best-practices">Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/tls_setup.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_guide/troubleshooting.html">Troubleshooting Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/troubleshooting.html#general-troubleshooting-steps">General Troubleshooting Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/troubleshooting.html#connection-issues">Connection Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#connection-refused">Connection Refused</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#connection-timeout">Connection Timeout</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#connection-drops">Connection Drops</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/troubleshooting.html#authentication-issues">Authentication Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#authentication-failed">Authentication Failed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#invalid-token-udp">Invalid Token (UDP)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/troubleshooting.html#gamepad-issues">Gamepad Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#gamepad-not-detected">Gamepad Not Detected</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#buttons-not-working">Buttons Not Working</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#axes-inverted-or-wrong">Axes Inverted or Wrong</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/troubleshooting.html#virtual-gamepad-issues">Virtual Gamepad Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#virtual-gamepad-not-appearing">Virtual Gamepad Not Appearing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#gamepad-input-lag">Gamepad Input Lag</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/troubleshooting.html#tls-ssl-issues">TLS/SSL Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#tls-handshake-failed">TLS Handshake Failed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#certificate-errors">Certificate Errors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/troubleshooting.html#performance-issues">Performance Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#high-cpu-usage">High CPU Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#high-bandwidth-usage">High Bandwidth Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/troubleshooting.html#rate-limiting-issues">Rate Limiting Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#rate-limit-exceeded">Rate Limit Exceeded</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/troubleshooting.html#protocol-issues">Protocol Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#protocol-version-mismatch">Protocol Version Mismatch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#udp-packet-loss">UDP Packet Loss</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/troubleshooting.html#installation-issues">Installation Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#vgamepad-installation-fails">vgamepad Installation Fails</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#pygame-installation-issues">pygame Installation Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/troubleshooting.html#debug-mode">Debug Mode</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#enabling-debug-logging">Enabling Debug Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#what-debug-mode-shows">What Debug Mode Shows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#reading-debug-logs">Reading Debug Logs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/troubleshooting.html#common-log-messages">Common Log Messages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#understanding-warnings">Understanding Warnings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#understanding-errors">Understanding Errors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/troubleshooting.html#getting-help">Getting Help</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#before-asking-for-help">Before Asking for Help</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#reporting-issues">Reporting Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_guide/troubleshooting.html#where-to-get-help">Where to Get Help</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_guide/troubleshooting.html#see-also">See Also</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Technical Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../architecture.html">Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../architecture.html#system-overview">System Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../architecture.html#architecture-diagram">Architecture Diagram</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../architecture.html#component-architecture">Component Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../architecture.html#client-components">Client Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../architecture.html#server-components">Server Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../architecture.html#shared-components">Shared Components</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../architecture.html#communication-flow">Communication Flow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../architecture.html#tcp-connection-flow">TCP Connection Flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../architecture.html#udp-connection-flow">UDP Connection Flow</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../architecture.html#message-format">Message Format</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../architecture.html#input-message">Input Message</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../architecture.html#authentication-messages">Authentication Messages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../architecture.html#security-architecture">Security Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../architecture.html#authentication">Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../architecture.html#password-hashing">Password Hashing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../architecture.html#tls-ssl">TLS/SSL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../architecture.html#rate-limiting">Rate Limiting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../architecture.html#data-flow">Data Flow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../architecture.html#input-capture-to-virtual-output">Input Capture to Virtual Output</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../architecture.html#threading-model">Threading Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../architecture.html#client">Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../architecture.html#server">Server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../architecture.html#configuration-system">Configuration System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../architecture.html#extension-points">Extension Points</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../architecture.html#custom-button-mappings">Custom Button Mappings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../architecture.html#custom-axis-transformations">Custom Axis Transformations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../architecture.html#performance-considerations">Performance Considerations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../architecture.html#latency-sources">Latency Sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../architecture.html#optimization-strategies">Optimization Strategies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../architecture.html#memory-usage">Memory Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../architecture.html#design-principles">Design Principles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../architecture.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../security.html">Security</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../security.html#security-model">Security Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../security.html#threat-model">Threat Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../security.html#assumptions">Assumptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../security.html#threats-addressed">Threats Addressed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../security.html#threats-not-addressed">Threats Not Addressed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../security.html#authentication">Authentication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../security.html#password-based-authentication">Password-Based Authentication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../security.html#password-hashing">Password Hashing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../security.html#tcp-challenge-response">TCP Challenge-Response</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../security.html#udp-token-authentication">UDP Token Authentication</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../security.html#encryption">Encryption</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../security.html#tls-ssl-support">TLS/SSL Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../security.html#certificate-management">Certificate Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../security.html#self-signed-certificates">Self-Signed Certificates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../security.html#custom-certificates">Custom Certificates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../security.html#certificate-expiration">Certificate Expiration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../security.html#disabling-tls">Disabling TLS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../security.html#rate-limiting">Rate Limiting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../security.html#purpose">Purpose</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../security.html#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../security.html#algorithm">Algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../security.html#bypass">Bypass</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../security.html#input-validation">Input Validation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../security.html#button-validation">Button Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../security.html#axis-validation">Axis Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../security.html#message-validation">Message Validation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../security.html#secure-coding-practices">Secure Coding Practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../security.html#log-sanitization">Log Sanitization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../security.html#file-permissions">File Permissions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../security.html#secrets-management">Secrets Management</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../security.html#best-practices">Best Practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../security.html#network-security">Network Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../security.html#password-security">Password Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../security.html#certificate-security">Certificate Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../security.html#operational-security">Operational Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../security.html#debug-logging">Debug Logging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../security.html#reporting-security-issues">Reporting Security Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../security.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../protocol.html">Protocol Specification</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../protocol.html#protocol-overview">Protocol Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../protocol.html#protocol-version">Protocol Version</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../protocol.html#transport-layers">Transport Layers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../protocol.html#tcp-transport">TCP Transport</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../protocol.html#udp-transport">UDP Transport</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../protocol.html#message-format">Message Format</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../protocol.html#base-message-structure">Base Message Structure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../protocol.html#message-types">Message Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../protocol.html#input-message">Input Message</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../protocol.html#authentication-messages">Authentication Messages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../protocol.html#challenge-message">Challenge Message</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../protocol.html#response-message">Response Message</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../protocol.html#success-message">Success Message</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../protocol.html#failed-message">Failed Message</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../protocol.html#parameters-request">Parameters Request</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../protocol.html#parameters-response">Parameters Response</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../protocol.html#heartbeat-messages">Heartbeat Messages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../protocol.html#heartbeat">Heartbeat</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../protocol.html#heartbeat-acknowledgment">Heartbeat Acknowledgment</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../protocol.html#error-message">Error Message</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../protocol.html#connection-flows">Connection Flows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../protocol.html#tcp-connection-flow">TCP Connection Flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../protocol.html#udp-connection-flow">UDP Connection Flow</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../protocol.html#authentication-details">Authentication Details</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../protocol.html#tcp-challenge-response">TCP Challenge-Response</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../protocol.html#udp-token-authentication">UDP Token Authentication</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../protocol.html#rate-limiting">Rate Limiting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../protocol.html#error-handling">Error Handling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../protocol.html#protocol-errors">Protocol Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../protocol.html#connection-errors">Connection Errors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../protocol.html#compatibility">Compatibility</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../protocol.html#version-negotiation">Version Negotiation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../protocol.html#extensibility">Extensibility</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../protocol.html#constants">Constants</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../protocol.html#message-size-limits">Message Size Limits</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../protocol.html#performance-considerations">Performance Considerations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../protocol.html#bandwidth-usage">Bandwidth Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../protocol.html#latency">Latency</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../protocol.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../api.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../api.html#client-module">Client Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#module-padrelay.client.client_app">Client Application</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.client.client_app.UDPClientProtocol"><code class="docutils literal notranslate"><span class="pre">UDPClientProtocol</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.client.client_app.VirtualGamepadClient"><code class="docutils literal notranslate"><span class="pre">VirtualGamepadClient</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#module-padrelay.client.input">Input Handling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.client.input.GamepadInput"><code class="docutils literal notranslate"><span class="pre">GamepadInput</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#module-padrelay.client.constants">Client Constants</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../api.html#server-module">Server Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#module-padrelay.server.server_app">Server Application</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.server.server_app.VirtualGamepadServer"><code class="docutils literal notranslate"><span class="pre">VirtualGamepadServer</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#module-padrelay.server.input_processor">Input Processor</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.server.input_processor.GamepadHandler"><code class="docutils literal notranslate"><span class="pre">GamepadHandler</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#module-padrelay.server.virtual_gamepad">Virtual Gamepad</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.server.virtual_gamepad.VirtualGamepad"><code class="docutils literal notranslate"><span class="pre">VirtualGamepad</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#module-padrelay.server.constants">Server Constants</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../api.html#protocol-module">Protocol Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#module-padrelay.protocol.tcp">TCP Protocol</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.protocol.tcp.TCPProtocolHandler"><code class="docutils literal notranslate"><span class="pre">TCPProtocolHandler</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#module-padrelay.protocol.udp">UDP Protocol</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.protocol.udp.UDPProtocolHandler"><code class="docutils literal notranslate"><span class="pre">UDPProtocolHandler</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.protocol.udp.UDPServerProtocol"><code class="docutils literal notranslate"><span class="pre">UDPServerProtocol</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#module-padrelay.protocol.messages">Messages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.protocol.messages.BaseMessage"><code class="docutils literal notranslate"><span class="pre">BaseMessage</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.protocol.messages.InputMessage"><code class="docutils literal notranslate"><span class="pre">InputMessage</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.protocol.messages.HeartbeatMessage"><code class="docutils literal notranslate"><span class="pre">HeartbeatMessage</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.protocol.messages.HeartbeatAckMessage"><code class="docutils literal notranslate"><span class="pre">HeartbeatAckMessage</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.protocol.messages.AuthChallengeMessage"><code class="docutils literal notranslate"><span class="pre">AuthChallengeMessage</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.protocol.messages.AuthResponseMessage"><code class="docutils literal notranslate"><span class="pre">AuthResponseMessage</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.protocol.messages.AuthSuccessMessage"><code class="docutils literal notranslate"><span class="pre">AuthSuccessMessage</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.protocol.messages.AuthFailedMessage"><code class="docutils literal notranslate"><span class="pre">AuthFailedMessage</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.protocol.messages.AuthParamsRequestMessage"><code class="docutils literal notranslate"><span class="pre">AuthParamsRequestMessage</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.protocol.messages.AuthParamsMessage"><code class="docutils literal notranslate"><span class="pre">AuthParamsMessage</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.protocol.messages.ErrorMessage"><code class="docutils literal notranslate"><span class="pre">ErrorMessage</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.protocol.messages.validate_input_message"><code class="docutils literal notranslate"><span class="pre">validate_input_message()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#module-padrelay.protocol.constants">Protocol Constants</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../api.html#security-module">Security Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#module-padrelay.security.auth">Authentication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.security.auth.Authenticator"><code class="docutils literal notranslate"><span class="pre">Authenticator</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#module-padrelay.security.rate_limiting">Rate Limiting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.security.rate_limiting.ConnectionTracker"><code class="docutils literal notranslate"><span class="pre">ConnectionTracker</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#module-padrelay.security.tls_utils">TLS Utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.security.tls_utils.get_default_cert_paths"><code class="docutils literal notranslate"><span class="pre">get_default_cert_paths()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.security.tls_utils.ensure_cert_dir_exists"><code class="docutils literal notranslate"><span class="pre">ensure_cert_dir_exists()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.security.tls_utils.generate_self_signed_cert"><code class="docutils literal notranslate"><span class="pre">generate_self_signed_cert()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.security.tls_utils.create_server_ssl_context"><code class="docutils literal notranslate"><span class="pre">create_server_ssl_context()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.security.tls_utils.create_client_ssl_context"><code class="docutils literal notranslate"><span class="pre">create_client_ssl_context()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.security.tls_utils.check_cert_expiration"><code class="docutils literal notranslate"><span class="pre">check_cert_expiration()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.security.tls_utils.warn_if_cert_expiring_soon"><code class="docutils literal notranslate"><span class="pre">warn_if_cert_expiring_soon()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#module-padrelay.security.password_strength">Password Strength</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.security.password_strength.check_password_strength"><code class="docutils literal notranslate"><span class="pre">check_password_strength()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.security.password_strength.warn_weak_password"><code class="docutils literal notranslate"><span class="pre">warn_weak_password()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.security.password_strength.generate_password_suggestion"><code class="docutils literal notranslate"><span class="pre">generate_password_suggestion()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../api.html#core-module">Core Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#module-padrelay.core.config">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.core.config.load_config"><code class="docutils literal notranslate"><span class="pre">load_config()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.core.config.parse_client_args"><code class="docutils literal notranslate"><span class="pre">parse_client_args()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.core.config.parse_server_args"><code class="docutils literal notranslate"><span class="pre">parse_server_args()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.core.config.validate_server_config"><code class="docutils literal notranslate"><span class="pre">validate_server_config()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#module-padrelay.core.exceptions">Exceptions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.core.exceptions.GamepadBridgeError"><code class="docutils literal notranslate"><span class="pre">GamepadBridgeError</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.core.exceptions.ProtocolError"><code class="docutils literal notranslate"><span class="pre">ProtocolError</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.core.exceptions.AuthenticationError"><code class="docutils literal notranslate"><span class="pre">AuthenticationError</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.core.exceptions.ConnectionError"><code class="docutils literal notranslate"><span class="pre">ConnectionError</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.core.exceptions.ConfigurationError"><code class="docutils literal notranslate"><span class="pre">ConfigurationError</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.core.exceptions.InputError"><code class="docutils literal notranslate"><span class="pre">InputError</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#module-padrelay.core.logging_utils">Logging Utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.core.logging_utils.get_logger"><code class="docutils literal notranslate"><span class="pre">get_logger()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.core.logging_utils.sanitize_for_logging"><code class="docutils literal notranslate"><span class="pre">sanitize_for_logging()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../api.html#scripts-module">Scripts Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#module-padrelay.scripts.server">Server Entry Point</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.scripts.server.async_main"><code class="docutils literal notranslate"><span class="pre">async_main()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.scripts.server.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#module-padrelay.scripts.client">Client Entry Point</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.scripts.client.async_main"><code class="docutils literal notranslate"><span class="pre">async_main()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.scripts.client.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#module-padrelay.scripts.key_mapper">Key Mapper</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.scripts.key_mapper.ControllerMapper"><code class="docutils literal notranslate"><span class="pre">ControllerMapper</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api.html#padrelay.scripts.key_mapper.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../api.html#usage-examples">Usage Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#creating-a-client-programmatically">Creating a Client Programmatically</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#creating-a-server-programmatically">Creating a Server Programmatically</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#using-the-authenticator">Using the Authenticator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#custom-message-creation">Custom Message Creation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#rate-limiting-example">Rate Limiting Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api.html#tls-certificate-generation">TLS Certificate Generation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../api.html#see-also">See Also</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../development.html">Development Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../development.html#development-setup">Development Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#clone-repository">Clone Repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#create-virtual-environment">Create Virtual Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#install-dependencies">Install Dependencies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../development.html#project-structure">Project Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#directory-layout">Directory Layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#code-organization">Code Organization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../development.html#running-tests">Running Tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#run-all-tests">Run All Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#run-specific-test-file">Run Specific Test File</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#run-with-coverage">Run with Coverage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#run-specific-test">Run Specific Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#test-organization">Test Organization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../development.html#coding-standards">Coding Standards</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#style-guide">Style Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#type-hints">Type Hints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#docstrings">Docstrings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#code-formatting">Code Formatting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#linting">Linting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../development.html#common-development-tasks">Common Development Tasks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#adding-a-new-message-type">Adding a New Message Type</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#adding-a-new-configuration-option">Adding a New Configuration Option</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#adding-authentication-method">Adding Authentication Method</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../development.html#debugging">Debugging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#using-debug-mode">Using Debug Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#using-python-debugger">Using Python Debugger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#logging">Logging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../development.html#performance-profiling">Performance Profiling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#using-cprofile">Using cProfile</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#memory-profiling">Memory Profiling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../development.html#building-documentation">Building Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#install-sphinx">Install Sphinx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#build-html-documentation">Build HTML Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#build-pdf-documentation">Build PDF Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../development.html#release-process">Release Process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#version-numbering">Version Numbering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#creating-a-release">Creating a Release</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../development.html#manual-pypi-upload">Manual PyPI Upload</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../development.html#contributing">Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../development.html#architecture-documentation">Architecture Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../development.html#security-considerations">Security Considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../development.html#useful-resources">Useful Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../development.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing.html">Contributing Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../contributing.html#ways-to-contribute">Ways to Contribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../contributing.html#getting-started">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#fork-the-repository">1. Fork the Repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#clone-your-fork">2. Clone Your Fork</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#set-up-development-environment">3. Set Up Development Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#create-a-branch">4. Create a Branch</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../contributing.html#contribution-workflow">Contribution Workflow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#make-changes">1. Make Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#test-your-changes">2. Test Your Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#commit-your-changes">3. Commit Your Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#push-to-your-fork">4. Push to Your Fork</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#create-pull-request">5. Create Pull Request</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../contributing.html#pull-request-guidelines">Pull Request Guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#pr-template">PR Template</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#pr-review-process">PR Review Process</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../contributing.html#code-style">Code Style</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#python-style">Python Style</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#documentation-style">Documentation Style</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../contributing.html#testing-guidelines">Testing Guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#write-tests">Write Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#test-coverage">Test Coverage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../contributing.html#bug-reports">Bug Reports</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#reporting-bugs">Reporting Bugs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#example-bug-report">Example Bug Report</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../contributing.html#feature-requests">Feature Requests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#proposing-features">Proposing Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#example-feature-request">Example Feature Request</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../contributing.html#documentation-contributions">Documentation Contributions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#types-of-documentation">Types of Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#documentation-standards">Documentation Standards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#building-documentation">Building Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../contributing.html#controller-mapping-contributions">Controller Mapping Contributions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#share-your-mappings">Share Your Mappings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../contributing.html#code-review-guidelines">Code Review Guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#for-reviewers">For Reviewers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#for-contributors">For Contributors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../contributing.html#security-contributions">Security Contributions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#reporting-security-issues">Reporting Security Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contributing.html#id1">Security Contributions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../contributing.html#license">License</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../contributing.html#code-of-conduct">Code of Conduct</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../contributing.html#questions">Questions?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../contributing.html#thank-you">Thank You!</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../contributing.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../CHANGELOG.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../CHANGELOG.html#id2">1.1.0 - 2025-11-06</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../CHANGELOG.html#added">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../CHANGELOG.html#changed">Changed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../CHANGELOG.html#id4">1.0.4 - 2025-06-15</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../CHANGELOG.html#id5">Added</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../CHANGELOG.html#id7">1.0.3 - 2025-06-14</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../CHANGELOG.html#fixed">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../CHANGELOG.html#id9">1.0.2 - 2025-06-14</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../CHANGELOG.html#id10">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../CHANGELOG.html#id12">1.0.1 - 2025-06-14</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../CHANGELOG.html#id13">Added</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../CHANGELOG.html#id15">1.0.0 - 2025-06-14</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">PadRelay</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">padrelay.scripts.key_mapper</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for padrelay.scripts.key_mapper</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python3</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Xbox360/DS4 Controller Key Mapper</span>

<span class="sd">This script helps map your physical gamepad buttons to virtual gamepad buttons</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pygame</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">argparse</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">configparser</span>

<span class="c1"># Define constants for Xbox360 and DS4 buttons from vgamepad</span>
<span class="n">XBOX360_BUTTONS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;XUSB_GAMEPAD_A&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_B&quot;</span><span class="p">,</span> 
    <span class="s2">&quot;XUSB_GAMEPAD_X&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_Y&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_DPAD_UP&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_DPAD_DOWN&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_DPAD_LEFT&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_DPAD_RIGHT&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_LEFT_SHOULDER&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_RIGHT_SHOULDER&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_LEFT_THUMB&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_RIGHT_THUMB&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_START&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_BACK&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_GUIDE&quot;</span>
<span class="p">]</span>

<span class="n">DS4_BUTTONS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;DS4_BUTTON_CROSS&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DS4_BUTTON_CIRCLE&quot;</span><span class="p">,</span> 
    <span class="s2">&quot;DS4_BUTTON_SQUARE&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DS4_BUTTON_TRIANGLE&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DS4_BUTTON_SHOULDER_LEFT&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DS4_BUTTON_SHOULDER_RIGHT&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DS4_BUTTON_TRIGGER_LEFT&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DS4_BUTTON_TRIGGER_RIGHT&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DS4_BUTTON_SHARE&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DS4_BUTTON_OPTIONS&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DS4_BUTTON_THUMB_LEFT&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DS4_BUTTON_THUMB_RIGHT&quot;</span>
<span class="p">]</span>

<span class="c1"># Button descriptions</span>
<span class="n">XBOX360_BUTTON_NAMES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;XUSB_GAMEPAD_A&quot;</span><span class="p">:</span> <span class="s2">&quot;A Button (Green)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_B&quot;</span><span class="p">:</span> <span class="s2">&quot;B Button (Red)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_X&quot;</span><span class="p">:</span> <span class="s2">&quot;X Button (Blue)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_Y&quot;</span><span class="p">:</span> <span class="s2">&quot;Y Button (Yellow)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_DPAD_UP&quot;</span><span class="p">:</span> <span class="s2">&quot;D-Pad Up&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_DPAD_DOWN&quot;</span><span class="p">:</span> <span class="s2">&quot;D-Pad Down&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_DPAD_LEFT&quot;</span><span class="p">:</span> <span class="s2">&quot;D-Pad Left&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_DPAD_RIGHT&quot;</span><span class="p">:</span> <span class="s2">&quot;D-Pad Right&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_LEFT_SHOULDER&quot;</span><span class="p">:</span> <span class="s2">&quot;Left Bumper (LB)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_RIGHT_SHOULDER&quot;</span><span class="p">:</span> <span class="s2">&quot;Right Bumper (RB)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_LEFT_THUMB&quot;</span><span class="p">:</span> <span class="s2">&quot;Left Stick Click&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_RIGHT_THUMB&quot;</span><span class="p">:</span> <span class="s2">&quot;Right Stick Click&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_START&quot;</span><span class="p">:</span> <span class="s2">&quot;Start Button&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_BACK&quot;</span><span class="p">:</span> <span class="s2">&quot;Back Button&quot;</span><span class="p">,</span>
    <span class="s2">&quot;XUSB_GAMEPAD_GUIDE&quot;</span><span class="p">:</span> <span class="s2">&quot;Xbox Button (Guide)&quot;</span>
<span class="p">}</span>

<span class="n">DS4_BUTTON_NAMES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;DS4_BUTTON_CROSS&quot;</span><span class="p">:</span> <span class="s2">&quot;Cross Button (×)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DS4_BUTTON_CIRCLE&quot;</span><span class="p">:</span> <span class="s2">&quot;Circle Button (○)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DS4_BUTTON_SQUARE&quot;</span><span class="p">:</span> <span class="s2">&quot;Square Button (□)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DS4_BUTTON_TRIANGLE&quot;</span><span class="p">:</span> <span class="s2">&quot;Triangle Button (△)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DS4_BUTTON_SHOULDER_LEFT&quot;</span><span class="p">:</span> <span class="s2">&quot;L1 Button&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DS4_BUTTON_SHOULDER_RIGHT&quot;</span><span class="p">:</span> <span class="s2">&quot;R1 Button&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DS4_BUTTON_TRIGGER_LEFT&quot;</span><span class="p">:</span> <span class="s2">&quot;L2 Button (Digital)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DS4_BUTTON_TRIGGER_RIGHT&quot;</span><span class="p">:</span> <span class="s2">&quot;R2 Button (Digital)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DS4_BUTTON_SHARE&quot;</span><span class="p">:</span> <span class="s2">&quot;Share Button&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DS4_BUTTON_OPTIONS&quot;</span><span class="p">:</span> <span class="s2">&quot;Options Button&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DS4_BUTTON_THUMB_LEFT&quot;</span><span class="p">:</span> <span class="s2">&quot;L3 Button (Left Stick Click)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DS4_BUTTON_THUMB_RIGHT&quot;</span><span class="p">:</span> <span class="s2">&quot;R3 Button (Right Stick Click)&quot;</span>
<span class="p">}</span>

<span class="c1"># Axis names and descriptions</span>
<span class="n">AXIS_NAMES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;left_stick_x&quot;</span><span class="p">:</span> <span class="s2">&quot;Left Stick X-axis (move left stick left)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;left_stick_y&quot;</span><span class="p">:</span> <span class="s2">&quot;Left Stick Y-axis (move left stick up)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;right_stick_x&quot;</span><span class="p">:</span> <span class="s2">&quot;Right Stick X-axis (move right stick right)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;right_stick_y&quot;</span><span class="p">:</span> <span class="s2">&quot;Right Stick Y-axis (move right stick up)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;trigger_left&quot;</span><span class="p">:</span> <span class="s2">&quot;Left Trigger (press and hold LT/L2)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;trigger_right&quot;</span><span class="p">:</span> <span class="s2">&quot;Right Trigger (press and hold RT/R2)&quot;</span>
<span class="p">}</span>

<div class="viewcode-block" id="ControllerMapper">
<a class="viewcode-back" href="../../../api.html#padrelay.scripts.key_mapper.ControllerMapper">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">ControllerMapper</span><span class="p">:</span>
<div class="viewcode-block" id="ControllerMapper.__init__">
<a class="viewcode-back" href="../../../api.html#padrelay.scripts.key_mapper.ControllerMapper.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_path</span><span class="p">,</span> <span class="n">polling_interval</span><span class="o">=</span><span class="mf">0.1</span><span class="p">):</span>
        <span class="c1"># Initialize attributes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_path</span> <span class="o">=</span> <span class="n">output_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">polling_interval</span> <span class="o">=</span> <span class="n">polling_interval</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joystick</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamepad_type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">button_mapping</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hat_mapping</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># For D-pad if it uses a hat</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axis_mapping</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">uses_hat_for_dpad</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interrupt_flag</span> <span class="o">=</span> <span class="kc">False</span>
        
        <span class="c1"># Initialize pygame</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">init</span><span class="p">()</span></div>

        
<div class="viewcode-block" id="ControllerMapper.select_gamepad_type">
<a class="viewcode-back" href="../../../api.html#padrelay.scripts.key_mapper.ControllerMapper.select_gamepad_type">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">select_gamepad_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Allow user to select gamepad type&quot;&quot;&quot;</span>
        <span class="n">controller_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        
        <span class="c1"># Try to auto-detect based on common controller names</span>
        <span class="k">if</span> <span class="s1">&#39;xbox&#39;</span> <span class="ow">in</span> <span class="n">controller_name</span> <span class="ow">or</span> <span class="s1">&#39;x-box&#39;</span> <span class="ow">in</span> <span class="n">controller_name</span><span class="p">:</span>
            <span class="n">suggested_type</span> <span class="o">=</span> <span class="s1">&#39;xbox360&#39;</span>
        <span class="k">elif</span> <span class="s1">&#39;dual shock&#39;</span> <span class="ow">in</span> <span class="n">controller_name</span> <span class="ow">or</span> <span class="s1">&#39;dualshock&#39;</span> <span class="ow">in</span> <span class="n">controller_name</span> <span class="ow">or</span> <span class="s1">&#39;playstation&#39;</span> <span class="ow">in</span> <span class="n">controller_name</span> <span class="ow">or</span> <span class="s1">&#39;ps4&#39;</span> <span class="ow">in</span> <span class="n">controller_name</span><span class="p">:</span>
            <span class="n">suggested_type</span> <span class="o">=</span> <span class="s1">&#39;ds4&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">suggested_type</span> <span class="o">=</span> <span class="kc">None</span>
            
        <span class="c1"># Ask user to confirm or select</span>
        <span class="k">if</span> <span class="n">suggested_type</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Detected controller type: </span><span class="si">{</span><span class="n">suggested_type</span><span class="si">}</span><span class="s2"> (based on &#39;</span><span class="si">{</span><span class="n">controller_name</span><span class="si">}</span><span class="s2">&#39;)&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is this correct? (y/n)&quot;</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="nb">input</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            
            <span class="k">if</span> <span class="n">response</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gamepad_type</span> <span class="o">=</span> <span class="n">suggested_type</span>
                <span class="k">return</span>
        
        <span class="c1"># Manual selection</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Select gamepad type:&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;1. Xbox 360&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;2. DualShock 4 (PS4)&quot;</span><span class="p">)</span>
        
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">choice</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter choice (1 or 2): &quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">choice</span> <span class="o">==</span> <span class="s1">&#39;1&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gamepad_type</span> <span class="o">=</span> <span class="s1">&#39;xbox360&#39;</span>
                <span class="k">break</span>
            <span class="k">elif</span> <span class="n">choice</span> <span class="o">==</span> <span class="s1">&#39;2&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gamepad_type</span> <span class="o">=</span> <span class="s1">&#39;ds4&#39;</span>
                <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Invalid choice. Please enter 1 or 2.&quot;</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="ControllerMapper.detect_controller">
<a class="viewcode-back" href="../../../api.html#padrelay.scripts.key_mapper.ControllerMapper.detect_controller">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">detect_controller</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Detect and initialize the first available controller&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">pygame</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_count</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No gamepad detected! Please connect a gamepad and try again.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
            
        <span class="bp">self</span><span class="o">.</span><span class="n">joystick</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">Joystick</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
        
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Controller detected: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Number of buttons: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_numbuttons</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Number of axes: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_numaxes</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Number of hats: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_numhats</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        
        <span class="c1"># Select gamepad type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">select_gamepad_type</span><span class="p">()</span>
        
        <span class="k">return</span> <span class="kc">True</span></div>

    
<div class="viewcode-block" id="ControllerMapper.wait_for_button_release">
<a class="viewcode-back" href="../../../api.html#padrelay.scripts.key_mapper.ControllerMapper.wait_for_button_release">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">wait_for_button_release</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait until all buttons are released&quot;&quot;&quot;</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>  <span class="c1"># Initial delay</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">pump</span><span class="p">()</span>  <span class="c1"># Process events without retrieving them</span>
            <span class="n">all_released</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_numbuttons</span><span class="p">()):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_button</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
                    <span class="n">all_released</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="n">all_released</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polling_interval</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>  <span class="c1"># Additional delay after release</span></div>

    
<div class="viewcode-block" id="ControllerMapper.wait_for_neutral">
<a class="viewcode-back" href="../../../api.html#padrelay.scripts.key_mapper.ControllerMapper.wait_for_neutral">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">wait_for_neutral</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait for controller to return to neutral state&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Please release all controls and return to neutral position...&quot;</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">pump</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="ControllerMapper.wait_for_button_press">
<a class="viewcode-back" href="../../../api.html#padrelay.scripts.key_mapper.ControllerMapper.wait_for_button_press">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">wait_for_button_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait for a button press and return the button index&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Waiting for button press...&quot;</span><span class="p">)</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">button_states</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_button</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_numbuttons</span><span class="p">())]</span>
        
        <span class="k">while</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span> <span class="o">&lt;</span> <span class="n">timeout</span><span class="p">:</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">pump</span><span class="p">()</span>  <span class="c1"># Process events without retrieving them</span>
            
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_numbuttons</span><span class="p">()):</span>
                <span class="n">current_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_button</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">current_state</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">button_states</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                    <span class="k">return</span> <span class="n">i</span>
                <span class="n">button_states</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">current_state</span>
            
            <span class="c1"># Check for skip input</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_for_skip</span><span class="p">():</span>
                <span class="k">return</span> <span class="kc">None</span>
                
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polling_interval</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="kc">None</span></div>

    
<div class="viewcode-block" id="ControllerMapper.check_for_skip">
<a class="viewcode-back" href="../../../api.html#padrelay.scripts.key_mapper.ControllerMapper.check_for_skip">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">check_for_skip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Non-blocking check for skip input (Enter key)&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="n">pygame</span><span class="o">.</span><span class="n">KEYDOWN</span><span class="p">]):</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">KEYDOWN</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">K_RETURN</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

    
<div class="viewcode-block" id="ControllerMapper.wait_for_hat_movement">
<a class="viewcode-back" href="../../../api.html#padrelay.scripts.key_mapper.ControllerMapper.wait_for_hat_movement">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">wait_for_hat_movement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Wait for hat (D-pad) movement and return the value&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Waiting for D-pad input...&quot;</span><span class="p">)</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        
        <span class="k">while</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span> <span class="o">&lt;</span> <span class="n">timeout</span><span class="p">:</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">pump</span><span class="p">()</span>  <span class="c1"># Process events without retrieving them</span>
            
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_numhats</span><span class="p">()):</span>
                <span class="n">hat_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_hat</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">hat_value</span> <span class="o">!=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">hat_value</span>
            
            <span class="c1"># Check for skip input</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_for_skip</span><span class="p">():</span>
                <span class="k">return</span> <span class="kc">None</span>
                
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polling_interval</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="kc">None</span></div>

    
<div class="viewcode-block" id="ControllerMapper.map_buttons">
<a class="viewcode-back" href="../../../api.html#padrelay.scripts.key_mapper.ControllerMapper.map_buttons">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">map_buttons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Guide user through mapping each button&quot;&quot;&quot;</span>
        <span class="c1"># Choose button list based on gamepad type</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamepad_type</span> <span class="o">==</span> <span class="s1">&#39;xbox360&#39;</span><span class="p">:</span>
            <span class="n">buttons</span> <span class="o">=</span> <span class="n">XBOX360_BUTTONS</span>
            <span class="n">button_names</span> <span class="o">=</span> <span class="n">XBOX360_BUTTON_NAMES</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">buttons</span> <span class="o">=</span> <span class="n">DS4_BUTTONS</span>
            <span class="n">button_names</span> <span class="o">=</span> <span class="n">DS4_BUTTON_NAMES</span>
            
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== Button Mapping ===&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Press each button when prompted. Press Enter to skip a button.&quot;</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">button</span> <span class="ow">in</span> <span class="n">buttons</span><span class="p">:</span>
            <span class="c1"># Skip mapping D-pad if we detect it uses a hat</span>
            <span class="k">if</span> <span class="n">button</span><span class="o">.</span><span class="n">startswith</span><span class="p">((</span><span class="s2">&quot;XUSB_GAMEPAD_DPAD_&quot;</span><span class="p">,</span> <span class="s2">&quot;DS4_BUTTON_DPAD_&quot;</span><span class="p">))</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">uses_hat_for_dpad</span><span class="p">:</span>
                <span class="k">continue</span>
                
            <span class="n">name</span> <span class="o">=</span> <span class="n">button_names</span><span class="p">[</span><span class="n">button</span><span class="p">]</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Press </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;(or press Enter to skip)&quot;</span><span class="p">)</span>
            
            <span class="c1"># Check for D-pad buttons to detect if using hat</span>
            <span class="n">is_dpad</span> <span class="o">=</span> <span class="n">button</span><span class="o">.</span><span class="n">startswith</span><span class="p">((</span><span class="s2">&quot;XUSB_GAMEPAD_DPAD_&quot;</span><span class="p">,</span> <span class="s2">&quot;DS4_BUTTON_DPAD_&quot;</span><span class="p">))</span>
            
            <span class="k">if</span> <span class="n">is_dpad</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_numhats</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1"># Try hat for D-pad first</span>
                <span class="n">hat_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait_for_hat_movement</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">hat_value</span> <span class="o">!=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="n">hat_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="c1"># First hat press - detect that we&#39;re using a hat for D-pad</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">uses_hat_for_dpad</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;D-pad uses hat control detected!&quot;</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">uses_hat_for_dpad</span> <span class="o">=</span> <span class="kc">True</span>
                        
                    <span class="c1"># Map this hat position to the D-pad button</span>
                    <span class="k">if</span> <span class="n">button</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;UP&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">hat_value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Mapped </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> to hat position (0, 1)&quot;</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">hat_mapping</span><span class="p">[</span><span class="s2">&quot;up&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">button</span>
                    <span class="k">elif</span> <span class="n">button</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;DOWN&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">hat_value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Mapped </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> to hat position (0, -1)&quot;</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">hat_mapping</span><span class="p">[</span><span class="s2">&quot;down&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">button</span>
                    <span class="k">elif</span> <span class="n">button</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;LEFT&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">hat_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Mapped </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> to hat position (-1, 0)&quot;</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">hat_mapping</span><span class="p">[</span><span class="s2">&quot;left&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">button</span>
                    <span class="k">elif</span> <span class="n">button</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;RIGHT&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">hat_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Mapped </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> to hat position (1, 0)&quot;</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">hat_mapping</span><span class="p">[</span><span class="s2">&quot;right&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">button</span>
                
                    <span class="bp">self</span><span class="o">.</span><span class="n">wait_for_button_release</span><span class="p">()</span>
                    <span class="k">continue</span>
            
            <span class="c1"># Regular button mapping</span>
            <span class="n">button_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait_for_button_press</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">button_idx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Mapped </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> to button </span><span class="si">{</span><span class="n">button_idx</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">button_mapping</span><span class="p">[</span><span class="n">button</span><span class="p">]</span> <span class="o">=</span> <span class="n">button_idx</span>
            
            <span class="bp">self</span><span class="o">.</span><span class="n">wait_for_button_release</span><span class="p">()</span>
            
            <span class="c1"># Check if we&#39;ve been interrupted</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">interrupt_flag</span><span class="p">:</span>
                <span class="k">return</span>
        
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Button mapping completed!&quot;</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="ControllerMapper.detect_axis_movement">
<a class="viewcode-back" href="../../../api.html#padrelay.scripts.key_mapper.ControllerMapper.detect_axis_movement">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">detect_axis_movement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis_name</span><span class="p">,</span> <span class="n">instruction</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">0.3</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Detect significant axis movement with improved feedback and direction detection</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            axis_name: The name of the axis being mapped</span>
<span class="sd">            instruction: Basic instruction to display to the user</span>
<span class="sd">            timeout: Time in seconds to wait for movement</span>
<span class="sd">            threshold: Minimum change to be considered significant</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="n">instruction</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        
        <span class="c1"># Provide specific guidance based on axis type</span>
        <span class="n">is_trigger</span> <span class="o">=</span> <span class="s2">&quot;trigger&quot;</span> <span class="ow">in</span> <span class="n">axis_name</span>
        <span class="k">if</span> <span class="s2">&quot;stick_y&quot;</span> <span class="ow">in</span> <span class="n">axis_name</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;IMPORTANT: Move the stick UPWARD (away from you)&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s2">&quot;stick_x&quot;</span> <span class="ow">in</span> <span class="n">axis_name</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;IMPORTANT: Move the stick to the RIGHT&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">is_trigger</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;IMPORTANT: Press the trigger all the way down&quot;</span><span class="p">)</span>
        
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;You have 5 seconds... Starting in:&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;GO! Move and hold now...&quot;</span><span class="p">)</span>
        
        <span class="c1"># Capture initial axis values</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">pump</span><span class="p">()</span>
        <span class="n">initial_values</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_axis</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_numaxes</span><span class="p">())]</span>
        
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">max_changes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_numaxes</span><span class="p">()</span>
        <span class="n">direction_of_change</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_numaxes</span><span class="p">()</span>  <span class="c1"># Store direction of change</span>
        <span class="n">best_axis</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">best_value</span> <span class="o">=</span> <span class="mi">0</span>
        
        <span class="k">while</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span> <span class="o">&lt;</span> <span class="n">timeout</span><span class="p">:</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">pump</span><span class="p">()</span>
            
            <span class="c1"># Track changes for all axes</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_numaxes</span><span class="p">()):</span>
                <span class="n">current</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_axis</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="n">change</span> <span class="o">=</span> <span class="n">current</span> <span class="o">-</span> <span class="n">initial_values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>  <span class="c1"># Keep sign for direction detection</span>
                <span class="n">abs_change</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">change</span><span class="p">)</span>
                
                <span class="c1"># Update max change and direction for this axis</span>
                <span class="k">if</span> <span class="n">abs_change</span> <span class="o">&gt;</span> <span class="n">max_changes</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                    <span class="n">max_changes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">abs_change</span>
                    <span class="n">direction_of_change</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">change</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span>
                    
                    <span class="c1"># Determine if this is a candidate based on axis type</span>
                    <span class="n">is_candidate</span> <span class="o">=</span> <span class="n">abs_change</span> <span class="o">&gt;</span> <span class="n">threshold</span>
                    
                    <span class="c1"># For triggers, prefer axes that move in positive direction (0 to 1)</span>
                    <span class="k">if</span> <span class="n">is_trigger</span> <span class="ow">and</span> <span class="n">is_candidate</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">change</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="p">(</span><span class="n">best_axis</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">abs_change</span> <span class="o">&gt;</span> <span class="n">max_changes</span><span class="p">[</span><span class="n">best_axis</span><span class="p">]):</span>
                            <span class="n">best_axis</span> <span class="o">=</span> <span class="n">i</span>
                            <span class="n">best_value</span> <span class="o">=</span> <span class="n">current</span>
                    <span class="c1"># For non-triggers, use the axis with largest change</span>
                    <span class="k">elif</span> <span class="n">is_candidate</span> <span class="ow">and</span> <span class="p">(</span><span class="n">best_axis</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">abs_change</span> <span class="o">&gt;</span> <span class="n">max_changes</span><span class="p">[</span><span class="n">best_axis</span><span class="p">]):</span>
                        <span class="n">best_axis</span> <span class="o">=</span> <span class="n">i</span>
                        <span class="n">best_value</span> <span class="o">=</span> <span class="n">current</span>
            
            <span class="c1"># Update progress indicator</span>
            <span class="n">elapsed</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
            <span class="n">progress</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">elapsed</span> <span class="o">/</span> <span class="n">timeout</span><span class="p">)</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">[&quot;</span> <span class="o">+</span> <span class="s2">&quot;#&quot;</span> <span class="o">*</span> <span class="n">progress</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="p">(</span><span class="mi">10</span> <span class="o">-</span> <span class="n">progress</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;] &quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">best_axis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">direction</span> <span class="o">=</span> <span class="s2">&quot;+&quot;</span> <span class="k">if</span> <span class="n">direction_of_change</span><span class="p">[</span><span class="n">best_axis</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;-&quot;</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Detected axis </span><span class="si">{</span><span class="n">best_axis</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">direction</span><span class="si">}{</span><span class="n">max_changes</span><span class="p">[</span><span class="n">best_axis</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
            
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polling_interval</span><span class="p">)</span>
        
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Time&#39;s up!&quot;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">best_axis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">direction</span> <span class="o">=</span> <span class="s2">&quot;+&quot;</span> <span class="k">if</span> <span class="n">direction_of_change</span><span class="p">[</span><span class="n">best_axis</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;-&quot;</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Mapped to axis </span><span class="si">{</span><span class="n">best_axis</span><span class="si">}</span><span class="s2"> (value: </span><span class="si">{</span><span class="n">best_value</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, change: </span><span class="si">{</span><span class="n">direction</span><span class="si">}{</span><span class="n">max_changes</span><span class="p">[</span><span class="n">best_axis</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">best_axis</span><span class="p">,</span> <span class="n">best_value</span><span class="p">,</span> <span class="n">direction_of_change</span><span class="p">[</span><span class="n">best_axis</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No significant movement detected&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span></div>

    
<div class="viewcode-block" id="ControllerMapper.map_axes">
<a class="viewcode-back" href="../../../api.html#padrelay.scripts.key_mapper.ControllerMapper.map_axes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">map_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Guide user through mapping each axis with improved usability&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== Axis Mapping ===&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Follow the prompts to map each axis correctly.&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;For each axis, you&#39;ll have 5 seconds to move and hold after the countdown.&quot;</span><span class="p">)</span>
        
        <span class="c1"># Map each axis</span>
        <span class="k">for</span> <span class="n">axis_name</span><span class="p">,</span> <span class="n">axis_desc</span> <span class="ow">in</span> <span class="n">AXIS_NAMES</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            
            <span class="c1"># Wait for neutral position</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wait_for_neutral</span><span class="p">()</span>
            
            <span class="c1"># Allow retry if mapping fails</span>
            <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                <span class="c1"># Detect axis movement</span>
                <span class="n">axis_idx</span><span class="p">,</span> <span class="n">axis_value</span><span class="p">,</span> <span class="n">direction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">detect_axis_movement</span><span class="p">(</span>
                    <span class="n">axis_name</span><span class="o">=</span><span class="n">axis_name</span><span class="p">,</span>
                    <span class="n">instruction</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Move </span><span class="si">{</span><span class="n">axis_desc</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
                
                <span class="k">if</span> <span class="n">axis_idx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">axis_mapping</span><span class="p">[</span><span class="n">axis_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">axis_idx</span>
                    
                    <span class="c1"># Special handling for Y-axis (inversion detection)</span>
                    <span class="k">if</span> <span class="n">axis_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;_y&#39;</span><span class="p">):</span>
                        <span class="c1"># For Y-axis, moving UP should typically produce a negative value </span>
                        <span class="c1"># in Xbox360 controllers and some DS4 controllers</span>
                        <span class="n">is_up_negative</span> <span class="o">=</span> <span class="n">direction</span> <span class="o">&lt;</span> <span class="mi">0</span>  <span class="c1"># Did moving up produce a negative value?</span>
                        
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">When you moved the stick UP, it produced a </span><span class="si">{</span><span class="s1">&#39;NEGATIVE&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">is_up_negative</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;POSITIVE&#39;</span><span class="si">}</span><span class="s2"> value.&quot;</span><span class="p">)</span>
                        
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamepad_type</span> <span class="o">==</span> <span class="s1">&#39;xbox360&#39;</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;For Xbox controllers, UP should normally be NEGATIVE.&quot;</span><span class="p">)</span>
                            <span class="n">inversion_needed</span> <span class="o">=</span> <span class="n">is_up_negative</span>
                        <span class="k">else</span><span class="p">:</span>  <span class="c1"># DS4</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;For DualShock controllers, this can vary by game.&quot;</span><span class="p">)</span>
                            <span class="n">inversion_needed</span> <span class="o">=</span> <span class="n">is_up_negative</span>
                            
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Based on testing, inversion is </span><span class="si">{</span><span class="s1">&#39;needed&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">inversion_needed</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;NOT needed&#39;</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Apply this recommendation? [Y/n]&quot;</span><span class="p">)</span>
                        
                        <span class="n">response</span> <span class="o">=</span> <span class="nb">input</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                        <span class="c1"># Default is to apply the recommendation</span>
                        <span class="n">apply_recommendation</span> <span class="o">=</span> <span class="n">response</span> <span class="o">!=</span> <span class="s1">&#39;n&#39;</span>
                        
                        <span class="k">if</span> <span class="n">axis_name</span> <span class="o">==</span> <span class="s1">&#39;left_stick_y&#39;</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">axis_mapping</span><span class="p">[</span><span class="s1">&#39;invert_left_y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">inversion_needed</span> <span class="k">if</span> <span class="n">apply_recommendation</span> <span class="k">else</span> <span class="ow">not</span> <span class="n">inversion_needed</span>
                            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Left Y-axis inversion set to: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">axis_mapping</span><span class="p">[</span><span class="s1">&#39;invert_left_y&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="n">axis_name</span> <span class="o">==</span> <span class="s1">&#39;right_stick_y&#39;</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">axis_mapping</span><span class="p">[</span><span class="s1">&#39;invert_right_y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">inversion_needed</span> <span class="k">if</span> <span class="n">apply_recommendation</span> <span class="k">else</span> <span class="ow">not</span> <span class="n">inversion_needed</span>
                            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Right Y-axis inversion set to: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">axis_mapping</span><span class="p">[</span><span class="s1">&#39;invert_right_y&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                    <span class="c1"># Successfully mapped</span>
                    <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">No significant movement detected. Would you like to try again? [Y/n]&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">input</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;n&#39;</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Skipping </span><span class="si">{</span><span class="n">axis_desc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="k">break</span>

            <span class="c1"># Check if we&#39;ve been interrupted</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">interrupt_flag</span><span class="p">:</span>
                <span class="k">return</span>
        
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Axis mapping completed!&quot;</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="ControllerMapper.verify_mapping">
<a class="viewcode-back" href="../../../api.html#padrelay.scripts.key_mapper.ControllerMapper.verify_mapping">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">verify_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Let user verify the mappings and make changes if needed&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== Verify Mappings ===&quot;</span><span class="p">)</span>
        
        <span class="c1"># Show button mappings</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Button Mappings:&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">button</span><span class="p">,</span> <span class="n">idx</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_mapping</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamepad_type</span> <span class="o">==</span> <span class="s1">&#39;xbox360&#39;</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">XBOX360_BUTTON_NAMES</span><span class="p">[</span><span class="n">button</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">DS4_BUTTON_NAMES</span><span class="p">[</span><span class="n">button</span><span class="p">]</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> -&gt; Button </span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            
        <span class="c1"># Show hat mappings if used</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">uses_hat_for_dpad</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">D-Pad Hat Mappings:&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">direction</span><span class="p">,</span> <span class="n">button</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">hat_mapping</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;D-Pad </span><span class="si">{</span><span class="n">direction</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">button</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            
        <span class="c1"># Show axis mappings</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Axis Mappings:&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">axis_name</span><span class="p">,</span> <span class="n">idx</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis_mapping</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">axis_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;invert_left_y&#39;</span><span class="p">,</span> <span class="s1">&#39;invert_right_y&#39;</span><span class="p">]:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">axis_name</span><span class="si">}</span><span class="s2"> -&gt; Axis </span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                
        <span class="c1"># Inversion settings</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Inversion Settings:&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invert Left Y-Axis: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">axis_mapping</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;invert_left_y&#39;</span><span class="p">,</span><span class="w"> </span><span class="kc">False</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invert Right Y-Axis: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">axis_mapping</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;invert_right_y&#39;</span><span class="p">,</span><span class="w"> </span><span class="kc">False</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Do you want to make any changes? (y/n)&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">input</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">manual_adjustments</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="ControllerMapper.manual_adjustments">
<a class="viewcode-back" href="../../../api.html#padrelay.scripts.key_mapper.ControllerMapper.manual_adjustments">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">manual_adjustments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Allow manual adjustments to mappings&quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">What would you like to adjust?&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;1. Button mapping&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;2. Axis mapping&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;3. Finish adjustments&quot;</span><span class="p">)</span>
            
            <span class="n">choice</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter choice (1-3): &quot;</span><span class="p">)</span>
            
            <span class="k">if</span> <span class="n">choice</span> <span class="o">==</span> <span class="s1">&#39;1&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">adjust_button_mapping</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">choice</span> <span class="o">==</span> <span class="s1">&#39;2&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">adjust_axis_mapping</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">choice</span> <span class="o">==</span> <span class="s1">&#39;3&#39;</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Invalid choice. Please enter 1-3.&quot;</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="ControllerMapper.adjust_button_mapping">
<a class="viewcode-back" href="../../../api.html#padrelay.scripts.key_mapper.ControllerMapper.adjust_button_mapping">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">adjust_button_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Allow manual adjustment of button mappings&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamepad_type</span> <span class="o">==</span> <span class="s1">&#39;xbox360&#39;</span><span class="p">:</span>
            <span class="n">buttons</span> <span class="o">=</span> <span class="n">XBOX360_BUTTONS</span>
            <span class="n">button_names</span> <span class="o">=</span> <span class="n">XBOX360_BUTTON_NAMES</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">buttons</span> <span class="o">=</span> <span class="n">DS4_BUTTONS</span>
            <span class="n">button_names</span> <span class="o">=</span> <span class="n">DS4_BUTTON_NAMES</span>
            
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Select button to adjust:&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">button</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">buttons</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">button</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_mapping</span><span class="p">:</span>
                <span class="n">idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_mapping</span><span class="p">[</span><span class="n">button</span><span class="p">]</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">. </span><span class="si">{</span><span class="n">button_names</span><span class="p">[</span><span class="n">button</span><span class="p">]</span><span class="si">}</span><span class="s2"> (currently mapped to button </span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">. </span><span class="si">{</span><span class="n">button_names</span><span class="p">[</span><span class="n">button</span><span class="p">]</span><span class="si">}</span><span class="s2"> (not mapped)&quot;</span><span class="p">)</span>
                
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">buttons</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">. Back&quot;</span><span class="p">)</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">choice</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter choice: &quot;</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">choice</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">buttons</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span>
                
            <span class="k">if</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">choice</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">buttons</span><span class="p">):</span>
                <span class="n">button</span> <span class="o">=</span> <span class="n">buttons</span><span class="p">[</span><span class="n">choice</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Enter new button index for </span><span class="si">{</span><span class="n">button_names</span><span class="p">[</span><span class="n">button</span><span class="p">]</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span>
                <span class="n">idx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">())</span>
                <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">idx</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_numbuttons</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">button_mapping</span><span class="p">[</span><span class="n">button</span><span class="p">]</span> <span class="o">=</span> <span class="n">idx</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Updated mapping: </span><span class="si">{</span><span class="n">button_names</span><span class="p">[</span><span class="n">button</span><span class="p">]</span><span class="si">}</span><span class="s2"> -&gt; Button </span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Invalid button index&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Invalid input&quot;</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="ControllerMapper.adjust_axis_mapping">
<a class="viewcode-back" href="../../../api.html#padrelay.scripts.key_mapper.ControllerMapper.adjust_axis_mapping">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">adjust_axis_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Allow manual adjustment of axis mappings&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Select axis to adjust:&quot;</span><span class="p">)</span>
        <span class="n">axes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">AXIS_NAMES</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">axis_name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">axes</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">axis_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis_mapping</span><span class="p">:</span>
                <span class="n">idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis_mapping</span><span class="p">[</span><span class="n">axis_name</span><span class="p">]</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">. </span><span class="si">{</span><span class="n">AXIS_NAMES</span><span class="p">[</span><span class="n">axis_name</span><span class="p">]</span><span class="si">}</span><span class="s2"> (currently mapped to axis </span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">. </span><span class="si">{</span><span class="n">AXIS_NAMES</span><span class="p">[</span><span class="n">axis_name</span><span class="p">]</span><span class="si">}</span><span class="s2"> (not mapped)&quot;</span><span class="p">)</span>
                
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">axes</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">. Back&quot;</span><span class="p">)</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">choice</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter choice: &quot;</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">choice</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">axes</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span>
                
            <span class="k">if</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">choice</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">axes</span><span class="p">):</span>
                <span class="n">axis_name</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="n">choice</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Enter new axis index for </span><span class="si">{</span><span class="n">AXIS_NAMES</span><span class="p">[</span><span class="n">axis_name</span><span class="p">]</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span>
                <span class="n">idx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">())</span>
                <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">idx</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_numaxes</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">axis_mapping</span><span class="p">[</span><span class="n">axis_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">idx</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Updated mapping: </span><span class="si">{</span><span class="n">AXIS_NAMES</span><span class="p">[</span><span class="n">axis_name</span><span class="p">]</span><span class="si">}</span><span class="s2"> -&gt; Axis </span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Invalid axis index&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Invalid input&quot;</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="ControllerMapper.generate_config">
<a class="viewcode-back" href="../../../api.html#padrelay.scripts.key_mapper.ControllerMapper.generate_config">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">generate_config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate configuration file for server&quot;&quot;&quot;</span>
        <span class="c1"># Check if file exists</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Warning: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="si">}</span><span class="s2"> already exists.&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;What would you like to do?&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;1. Overwrite&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;2. Choose a new filename&quot;</span><span class="p">)</span>
            
            <span class="n">choice</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter choice (1 or 2): &quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">choice</span> <span class="o">==</span> <span class="s1">&#39;2&#39;</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Enter new filename:&quot;</span><span class="p">)</span>
                <span class="n">new_path</span> <span class="o">=</span> <span class="nb">input</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">new_path</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">output_path</span> <span class="o">=</span> <span class="n">new_path</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Using default filename with timestamp&quot;</span><span class="p">)</span>
                    <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
                    <span class="n">base</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">output_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">base</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}{</span><span class="n">ext</span><span class="si">}</span><span class="s2">&quot;</span>
        
        <span class="c1"># Create config object</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">configparser</span><span class="o">.</span><span class="n">ConfigParser</span><span class="p">()</span>
        
        <span class="c1"># Server section</span>
        <span class="n">config</span><span class="o">.</span><span class="n">add_section</span><span class="p">(</span><span class="s1">&#39;server&#39;</span><span class="p">)</span>
        <span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;server&#39;</span><span class="p">,</span> <span class="s1">&#39;host&#39;</span><span class="p">,</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">)</span>
        <span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;server&#39;</span><span class="p">,</span> <span class="s1">&#39;port&#39;</span><span class="p">,</span> <span class="s1">&#39;9999&#39;</span><span class="p">)</span>
        <span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;server&#39;</span><span class="p">,</span> <span class="s1">&#39;protocol&#39;</span><span class="p">,</span> <span class="s1">&#39;tcp&#39;</span><span class="p">)</span>
        
        <span class="c1"># Gamepad section</span>
        <span class="n">config</span><span class="o">.</span><span class="n">add_section</span><span class="p">(</span><span class="s1">&#39;vgamepad&#39;</span><span class="p">)</span>
        <span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;vgamepad&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamepad_type</span><span class="p">)</span>
        
        <span class="c1"># Button mapping section</span>
        <span class="n">section_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;button_mapping_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">gamepad_type</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="n">config</span><span class="o">.</span><span class="n">add_section</span><span class="p">(</span><span class="n">section_name</span><span class="p">)</span>
        
        <span class="c1"># Convert button mapping from {button_name: idx} to {idx: button_name}</span>
        <span class="n">idx_to_button</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">button</span><span class="p">,</span> <span class="n">idx</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">button_mapping</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">idx_to_button</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">idx</span><span class="p">)]</span> <span class="o">=</span> <span class="n">button</span>
            
        <span class="c1"># Add each mapped button to config</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">button</span> <span class="ow">in</span> <span class="n">idx_to_button</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">section_name</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">button</span><span class="p">)</span>
            
        <span class="c1"># Add D-pad hat mapping if used</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">uses_hat_for_dpad</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">hat_mapping</span><span class="p">:</span>
            <span class="n">hat_section</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">section_name</span><span class="si">}</span><span class="s1">_hat&#39;</span>
            <span class="n">config</span><span class="o">.</span><span class="n">add_section</span><span class="p">(</span><span class="n">hat_section</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">direction</span><span class="p">,</span> <span class="n">button</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">hat_mapping</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">hat_section</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;hat_</span><span class="si">{</span><span class="n">direction</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">button</span><span class="p">)</span>
        
        <span class="c1"># Axis mapping section</span>
        <span class="n">config</span><span class="o">.</span><span class="n">add_section</span><span class="p">(</span><span class="s1">&#39;axis_mapping&#39;</span><span class="p">)</span>
        <span class="n">axis_mapping_filtered</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">k</span><span class="p">:</span> <span class="n">v</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis_mapping</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;invert_left_y&quot;</span><span class="p">,</span> <span class="s2">&quot;invert_right_y&quot;</span><span class="p">]</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="n">axis_name</span><span class="p">,</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">axis_mapping_filtered</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;axis_mapping&#39;</span><span class="p">,</span> <span class="n">axis_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">idx</span><span class="p">))</span>
        
        <span class="c1"># Axis options section</span>
        <span class="n">config</span><span class="o">.</span><span class="n">add_section</span><span class="p">(</span><span class="s1">&#39;axis_options&#39;</span><span class="p">)</span>
        <span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;axis_options&#39;</span><span class="p">,</span> <span class="s1">&#39;dead_zone&#39;</span><span class="p">,</span> <span class="s1">&#39;0.1&#39;</span><span class="p">)</span>
        <span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;axis_options&#39;</span><span class="p">,</span> <span class="s1">&#39;trigger_threshold&#39;</span><span class="p">,</span> <span class="s1">&#39;0.05&#39;</span><span class="p">)</span>
        <span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;axis_options&#39;</span><span class="p">,</span> <span class="s1">&#39;invert_left_y&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axis_mapping</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;invert_left_y&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
        <span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;axis_options&#39;</span><span class="p">,</span> <span class="s1">&#39;invert_right_y&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axis_mapping</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;invert_right_y&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
        
        <span class="c1"># Write to file</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">config_file</span><span class="p">:</span>
            <span class="n">config</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>
            
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Configuration saved to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;You can use this file with your server.py using the --config option:&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;python server.py --config </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="ControllerMapper.run">
<a class="viewcode-back" href="../../../api.html#padrelay.scripts.key_mapper.ControllerMapper.run">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Run the mapping process&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== Xbox360/DS4 Controller Key Mapper ===&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This tool will guide you through mapping your controller buttons.&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Press Ctrl+C at any time to exit.&quot;</span><span class="p">)</span>
            
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">detect_controller</span><span class="p">():</span>
                <span class="k">return</span>
                
            <span class="bp">self</span><span class="o">.</span><span class="n">map_buttons</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">map_axes</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">verify_mapping</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">generate_config</span><span class="p">()</span>
            
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Mapping completed successfully!&quot;</span><span class="p">)</span>
            
        <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Mapping interrupted by user.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">interrupt_flag</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Would you like to save the partial mapping? (y/n): &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">generate_config</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="c1"># Clean up pygame</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span></div>
</div>



<div class="viewcode-block" id="main">
<a class="viewcode-back" href="../../../api.html#padrelay.scripts.key_mapper.main">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Xbox360/DS4 Controller Key Mapper&quot;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--output&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;controller_config.ini&#39;</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Output configuration file path&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--polling-interval&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Polling interval in seconds (higher values use less CPU)&#39;</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
    
    <span class="c1"># Start the mapping process</span>
    <span class="n">mapper</span> <span class="o">=</span> <span class="n">ControllerMapper</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">polling_interval</span><span class="p">)</span>
    <span class="n">mapper</span><span class="o">.</span><span class="n">run</span><span class="p">()</span></div>



<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, ssh-den.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>